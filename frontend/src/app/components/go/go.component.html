<div *ngIf="!app.go.race">
  <h4>Select race:</h4>
    <table  class="mt-2 table" id="items-table">
      <tr *ngFor="let item of app.races.items">
        <td><a class="nav-link" routerLink="/go/{{item.id}}"  href="">{{item.name}}</a></td>
      </tr>
    </table>
</div>

<div *ngIf="app.go.race" class="">
  <div class="row" >
    <div class="col-md-6" >
      <div 
        *ngFor="let item of app.events.items | orderBy: ['-t']; index as i;" 
        [ngStyle]="{'margin-top': delayH(item, app.events.items, i)}"
        class="row reg"
        >
        <div class="col-md-1"><h3>{{item.competitorNum}}</h3></div>
        <div class="col-md-6">
          {{item.competitorName}}<br>
          <small>
            <!-- {{item.t|date:'HH:mm:ss.SSS'}}  -->
            <!-- {{(app.go.t-item.t-4*3600000)|date:'HH:mm:ss.SSS'}} -->
            {{(item.t-app.go.start.t-4*3600000)|date:'HH:mm:ss.SSS'}}
          </small>
          <h4 *ngIf="item.eventType==2">Start Race</h4>
          <h4 *ngIf="item.eventType==3">Finish Race</h4>
        </div>
        <div class="col-md-5">
          {{item.categoryName}}
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <h5>
        {{app.go.race.name}} 
        <span *ngIf="app.go.start"> | {{app.go.start.t|date:'HH:mm:ss.SSS'}}</span>
        <span *ngIf="app.go.start"> | {{(app.go.t-app.go.start.t-4*3600000 )|date:'HH:mm:ss.SSS'}}</span>
        <span *ngIf="app.go.finish"> | {{app.go.finish.t|date:'HH:mm:ss.SSS'}}</span>
      </h5>
      <form  (submit)="onFormSubmit()">
        <fieldset>
          <div class="form-group">
            <input type="text" class="form-control" [(ngModel)]="newEvent.eventType" [ngModelOptions]="{standalone: true}" placeholder="eventType">
          </div>
          <div class="form-group">
            <input type="text" class="form-control" [(ngModel)]="newEvent.competitorId" [ngModelOptions]="{standalone: true}" placeholder="competitorId">
          </div>
          <div class="form-group">
            <button class="btn btn-primary btn-lg" type="submit">Register lap</button>
          </div>

        </fieldset>
      </form>
    </div>
  </div>
</div>

